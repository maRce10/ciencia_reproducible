<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>reportes_dinamicos_con_rmarkdown.knit</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/clipboard-2.0.6/clipboard.min.js"></script>
<link href="site_libs/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.css" rel="stylesheet" />
<script src="site_libs/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.js"></script>
<script>window.xaringanExtraClipboard(null, {"button":"<i class=\"fa fa-clipboard\"><\/i>","success":"<i class=\"fa fa-check\" style=\"color: #90BE6D\"><\/i>","error":"<i class=\"fa fa-times-circle\" style=\"color: #F94144\"><\/i>"})</script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-binding-2.1.1/leaflet.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="extra.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Ciencia Reproducible</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Manuales
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="compendios_de_investigacion.html">Compendios de investigación</a>
    </li>
    <li>
      <a href="reproducibilidad_en_taxonómica.html">Reproducibilidad en la taxonomía</a>
    </li>
    <li>
      <a href="programacion_y_reproducibilidad.html">Programación y reproducibilidad</a>
    </li>
    <li>
      <a href="intro_a_git_y_github.html">Control de versiones: git y github</a>
    </li>
    <li>
      <a href="escribir_articulos_en_rmarkdown.html">Artículos en Rmarkdown</a>
    </li>
    <li>
      <a href="trampas_estadisticas.html">Trampas estadísticas</a>
    </li>
  </ul>
</li>
<li>
  <a href="preparacion_curso.html">Preparación para el curso</a>
</li>
<li>
  <a href="https://codefile.io/f/XOIzH23KfULuZKyZ1TYT">Compartir código</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tareas
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Tarea 1</li>
    <li class="dropdown-header">Solución: tarea 1</li>
    <li class="dropdown-header">Tarea 2</li>
    <li class="dropdown-header">Solución: tarea 2</li>
    <li class="dropdown-header">Tarea 3</li>
    <li class="dropdown-header">Solución: tarea 3</li>
    <li class="dropdown-header">Tarea 4</li>
    <li class="dropdown-header">Solución: tarea4</li>
  </ul>
</li>
<li>
  <a href="https://github.com/maRce10/ciencia_reproducible/raw/master/additional_files/2022-10-14_Probl Esp Ecol_15_Herramientas-Practicas-Para-Ciencia-Reproducible.pdf">Programa del curso</a>
</li>
<li>
  <a href="instructor.html">Instructor</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore"><center>
<font size="7"><b>Reportes dinámicos con Rmarkdown</b></font>
</center></h1>
<h3 class="subtitle"><center>
<font size="4"><b>Herramientas prácticas para investigación
reproducible</b></font>
</center></h3>
<h4 class="author"><center>
<font size="5"><a href="http://marceloarayasalas.weebly.com/">Marcelo
Araya-Salas, PhD</a></font>
</center></h4>
<h4 class="date"><center>
“2022-10-24”
</center></h4>

</div>


<style>
body
  { counter-reset: source-line 0; }
pre.numberSource code
  { counter-reset: none; }
</style>
<p> </p>
<!-- skyblue box -->
<div id="objetivos-del-manual" class="section level1 alert alert-info">
<h1>Objetivos del manual</h1>
<ul>
<li><p>Familiarizarse con el formato para reportes dinámicos
Rmarkdown</p></li>
<li><p>Ser capaz de documentar el manejo y análisis de datos en R usando
Rmarkdown</p></li>
</ul>
</div>
<p> </p>
<p>Paquetes a utilizar en este manual:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># vector con paquetes</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>ptqs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;leaflet&quot;</span>, <span class="st">&quot;remotes&quot;</span>, <span class="st">&quot;hadley/emo&quot;</span>, <span class="st">&quot;maRce10/sketchy&quot;</span>, <span class="st">&quot;knitr&quot;</span>,</span>
<span id="cb1-3"><a href="#cb1-3"></a>    <span class="st">&quot;rmarkdown&quot;</span>, <span class="st">&quot;kableExtra&quot;</span>, <span class="st">&quot;rmdformats&quot;</span>, <span class="st">&quot;revealjs&quot;</span>, <span class="st">&quot;rticles&quot;</span>,</span>
<span id="cb1-4"><a href="#cb1-4"></a>    <span class="st">&quot;tufte&quot;</span>)</span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># bucle para instalar/cargar paquetes</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>instalado <span class="ot">&lt;-</span> <span class="fu">sapply</span>(ptqs, <span class="cf">function</span>(y) {</span>
<span id="cb1-8"><a href="#cb1-8"></a></span>
<span id="cb1-9"><a href="#cb1-9"></a>    ptq <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(y, <span class="st">&quot;/&quot;</span>)[[<span class="dv">1</span>]]</span>
<span id="cb1-10"><a href="#cb1-10"></a>    ptq <span class="ot">&lt;-</span> ptq[<span class="fu">length</span>(ptq)]</span>
<span id="cb1-11"><a href="#cb1-11"></a></span>
<span id="cb1-12"><a href="#cb1-12"></a>    <span class="cf">if</span> (<span class="sc">!</span>ptq <span class="sc">%in%</span> <span class="fu">installed.packages</span>()[, <span class="st">&quot;Package&quot;</span>]) {</span>
<span id="cb1-13"><a href="#cb1-13"></a>        <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">&quot;/&quot;</span>, y))</span>
<span id="cb1-14"><a href="#cb1-14"></a>            remotes<span class="sc">::</span><span class="fu">install_github</span>(y, <span class="at">force =</span> <span class="cn">TRUE</span>) <span class="cf">else</span> <span class="fu">install.packages</span>(y)</span>
<span id="cb1-15"><a href="#cb1-15"></a>    }</span>
<span id="cb1-16"><a href="#cb1-16"></a></span>
<span id="cb1-17"><a href="#cb1-17"></a>    <span class="fu">try</span>(<span class="fu">require</span>(ptq, <span class="at">character.only =</span> <span class="cn">TRUE</span>), <span class="at">silent =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-18"><a href="#cb1-18"></a>})</span></code></pre></div>
<p> </p>
<hr />
<div id="crisis-de-reproducibilidad-en-la-ciencia"
class="section level2">
<h2>Crisis de reproducibilidad en la ciencia</h2>
<p>La mayoría de los procedimientos (incluyendo análisis de datos) en
estudios científicos no se pueden replicar</p>
<p><img src="images/nature-reproducibility-crisis.jpeg" width="70%" style="display: block; margin: auto;" /></p>
<p><a href="https://www.nature.com/articles/533452a"><em>Baker. 2016.
Nature</em></a></p>
<p>El compartir datos y análisis de forma transparente y detalladamente
documentada, en formatos que puedan ser reproducidos por otros
investigadores es una de las principales herramientas para lidiar con
este problema.</p>
<p><img src="images/soluciones_reproducible.png" width="100%" style="display: block; margin: auto;" /></p>
<p><em>Gallagher et al. 2020. Nature Eco &amp; Evo</em></p>
<p>Las herramientas programáticas como R tienden naturalmente a
facilitar la reproducibilidad ya que el código de un análisis se puede
registrar y compartir fácilmente. Muchos lenguajes de programación
permiten la generación de reportes dinámicos, los cuales resultan
fundamentales para hacer manejo de datos y análisis estadísticos
reproducibles. Los reportes dinámicos suelen contener toda la
información necesaria para que otros investigadores puedan replicar
todos los pasos de análisis que generaron los resultados de artículos
científicos. Por tanto son una herramienta indispensable para mejorar la
reproduciblidad en la ciencia.</p>
<p>En R la herramienta mas popular para la generación de reportes
dinámicos es Rmarkdown. Rmarkdown <a
href="http://rmarkdown.rstudio.com">se puede describir</a> como “<em>un
formato eléctronico de documentación que facilita la creación de
documentos, presentaciones e informes dinámicos desde R</em>”. R
Markdown puede generar documentos con bloques de código de R (“chunks”)
incrustados entre líneas de texto. Cuando se procesa el documento, estos
bloques se evalúan (si el usuario así lo desea) y los resultados se
“imprimen” en el documento de acuerdo con ciertas convenciones.</p>
<p> </p>
<div id="ventajas-de-los-reportes-dinámicos-con-rmarkdown"
class="section level3">
<h3>Ventajas de los reportes dinámicos con Rmarkdown:</h3>
<ul>
<li><p>El <strong>código R se puede incrustar en el informe</strong>,
por lo que no es necesario mantener el informe y el código de R por
separado</p></li>
<li><p>Incluir el código R directamente en un informe proporciona una
<strong>estructura intuitiva</strong> para reproducir los
análisis</p></li>
<li><p>El texto del informe está <strong>escrito como texto
normal</strong>, por lo que no se requieren conocimientos de
programación (i.e. R o HTML) para comprenderlos</p></li>
<li><p><strong>El resultado es un archivo HTML</strong> que incluye
imágenes, bloques de código con los comandos de R, los resultados de
estos códigos y texto. No se necesitan archivos adicionales, todo está
incorporado en el archivo HTML.</p></li>
<li><p>Los informes son <strong>fáciles de compartir por correo o
publicarlos en línea</strong></p></li>
<li><p>Estos informes <strong>facilitan la colaboración y mejoran la
reproducibilidad</strong> (entender los análisis es mucho mas fácil
cuando hay texto explicativo, código de R, los resultados del código y
los gráficos en un mismo archivo)</p></li>
<li><p><strong>Se actualizan fácilmente</strong> para incluir nuevos
análisis y/o integrar nuevos datos</p></li>
</ul>
<p> </p>
<hr />
</div>
</div>
<div id="crear-documentos-r-markdown" class="section level1">
<h1>Crear documentos R Markdown</h1>
<p>Usaremos <a href="www.rstudio.com">Rstudio</a> para crear documentos
R Markdown. Empiece por seleccionar “R Markdown …” en el menú
desplegable que aparece cuando crea un nuevo archivo:</p>
<p><img src="images/image1.PNG" width="70%" style="display: block; margin: auto;" /></p>
<p><font size="3"> <i>Nota: es posible que se le solicite aquí que
instale varios paquetes necesarios para que R Markdown
funcione.</i></font></p>
<p> </p>
<p>Aparecerá una ventana que le pedirá un título y autor para el nuevo
documento (esto no es tan relevante en este punto y puedo ser modificado
fácilmente luego), así como el formato. Seleccione ‘HTML’ ya que nos
interesa convertirlo a un formato de visualización universal. Puede
cambiar sus preferencias de salida de ‘HTML’ a ‘PDF’ o ‘Word’ en
cualquier momento:</p>
<p><img src="images/image2.PNG" width="70%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>Esto lo llevará a su primer archivo ‘.Rmd’ (o R Markdown). El nuevo
archivo ya viene con una plantilla con instrucciones básicas:</p>
<p><img src="images/image3.PNG" width="100%" style="display: block; margin: auto;" />
 </p>
<p> </p>
<div id="ejercicio-1" class="section level2 alert alert-info">
<h2>Ejercicio 1</h2>
<p>Cree un nuevo archivo R Markdown, escriba algunas líneas de texto y
haga clic en “Knit” para ver cómo se verá su reporte.</p>
<p> </p>
<p><img src="images/image4.PNG" width="90%" style="display: block; margin: auto;" /></p>
</div>
<p> </p>
</div>
<div id="syntaxis-markdown" class="section level1">
<h1>Syntaxis Markdown</h1>
<p>Markdown (y por extensión Rmarkdown) tiene sus propias reglas
sintácticas. Sin embargo, este lenguaje es relativamente simple y fácil
de dominar:</p>
<hr />
<div id="crear-encabezados-de-varios-tamaños" class="section level2">
<h2>Crear encabezados de varios tamaños</h2>
<p>Código:</p>
<p><img src="images/image5.PNG" width="50%" style="display: block; margin: auto;" /></p>
<p>Resultado:</p>
</div>
</div>
<div id="encabezado-1" class="section level1">
<h1>Encabezado 1</h1>
<div id="encabezado-2" class="section level2">
<h2>Encabezado 2</h2>
<div id="encabezado-3" class="section level3">
<h3>Encabezado 3</h3>
<hr />
</div>
</div>
<div id="opciones-del-texto" class="section level2">
<h2>Opciones del texto</h2>
<p> </p>
<p>Código:</p>
<p><img src="images/image6.PNG" width="90%" style="display: block; margin: auto;" /></p>
<p>Resultado:</p>
<p>Hacer texto <strong>en negrita</strong>, <em>itálico</em>,
<del>tachado</del>, o super<sup>índice</sup></p>
<hr />
</div>
<div id="añadir-una-imagen" class="section level2">
<h2>Añadir una imagen</h2>
<p>Código:</p>
<p><img src="images/add_image.png" width="50%" style="display: block; margin: auto;" /></p>
<p>Resultado:</p>
<p><img src="images/rmarkdown_icon.png" width="40%" style="display: block; margin: auto;" /></p>
<p>También podemos añadir una imagen con la función
<code>include_graphics()</code> del paquete knitr.</p>
<p>Código:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">include_graphics</span>(<span class="st">&quot;./images/rmarkdown_icon.png&quot;</span>)</span></code></pre></div>
<p>Resultado:</p>
<p><img src="images/rmarkdown_icon.png" width="40%" style="display: block; margin: auto;" /></p>
<p>Note que esta opción nos permite hacer uso de los argumentos del
bloque de código dedicados a la graficación, y po r tanto es una opción
mas flexible.</p>
<hr />
</div>
<div id="crear-enlaces-hyperlinks" class="section level2">
<h2>Crear enlaces (‘hyperlinks’)</h2>
<p>Código:</p>
<p><img src="images/image8.PNG" width="70%" style="display: block; margin: auto;" /></p>
<p>Resultado:</p>
<p>Crear un enlace a <a href="https://figshare.com">figshare</a></p>
<p> </p>
</div>
<div id="ejercicio-2" class="section level2 alert alert-info">
<h2>Ejercicio 2</h2>
<p> </p>
<p>2.1 Cree unos encabezados y sub-encabezados en su documento
Rmarkdown</p>
<p> </p>
<p>2.2 Añada texto con algunas palabras <strong>en negrita</strong> y en
<em>italica</em></p>
<p> </p>
<p>2.3 Incruste una imagen de su organismo favorito (o un gif)</p>
<p> </p>
<p>2.4 Añada un enlace URL</p>
</div>
<p> </p>
<div id="incrustar-código" class="section level2">
<h2>Incrustar código</h2>
<p>Para incrustar el código de R, tenemos que definir un área donde se
encuentra el código. Esta ‘área’ se conoce como un bloque de código (o
‘chunk’) y se define mediante:</p>
<p><img src="images/image9.PNG" width="30%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>Observe que el recuadro de R está en gris, mientras que el resto está
en fondo blanco. Todo lo que se incluye en el segmento se evalúa y
muestra de acuerdo con las especificaciones, aunque estas se pueden
modificar.</p>
<p> </p>
<p>Podemos, por ejemplo, agregar una nueva columna al conjunto de datos
de ejemplo de iris:</p>
<p><img src="images/image10.PNG" width="70%" style="display: block; margin: auto;" /></p>
<p>Resultado:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a>iris<span class="sc">$</span>random.var <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="fu">nrow</span>(iris))</span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="fu">head</span>(iris)</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
Sepal.Length
</th>
<th style="text-align:center;">
Sepal.Width
</th>
<th style="text-align:center;">
Petal.Length
</th>
<th style="text-align:center;">
Petal.Width
</th>
<th style="text-align:center;">
Species
</th>
<th style="text-align:center;">
random.var
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
5.1
</td>
<td style="text-align:center;">
3.5
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
1.1239
</td>
</tr>
<tr>
<td style="text-align:center;">
4.9
</td>
<td style="text-align:center;">
3.0
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
0.0139
</td>
</tr>
<tr>
<td style="text-align:center;">
4.7
</td>
<td style="text-align:center;">
3.2
</td>
<td style="text-align:center;">
1.3
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
-1.3092
</td>
</tr>
<tr>
<td style="text-align:center;">
4.6
</td>
<td style="text-align:center;">
3.1
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
1.5521
</td>
</tr>
<tr>
<td style="text-align:center;">
5.0
</td>
<td style="text-align:center;">
3.6
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
-0.4580
</td>
</tr>
<tr>
<td style="text-align:center;">
5.4
</td>
<td style="text-align:center;">
3.9
</td>
<td style="text-align:center;">
1.7
</td>
<td style="text-align:center;">
0.4
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
0.8936
</td>
</tr>
</tbody>
</table>
<p> </p>
<p>Cuando se procesa su documento, el segmento de código se muestra en
un cuadro gris y los resultados de ese código se muestran en un cuadro
blanco. ¿Qué pasa si solo desea que se muestre la salida de su código?
¿O que su código se muestre pero no se ejecute realmente? Hay argumentos
que puede agregar a cada uno de sus bloques para especificar estas y
otras opciones:</p>
<hr />
</div>
<div id="ocultar-código" class="section level2">
<h2>Ocultar código</h2>
<p>Añadir el argumento <code>echo=FALSE</code></p>
<p>Código:</p>
<p><img src="images/image11.PNG" width="90%" style="display: block; margin: auto;" /></p>
<p>Resultado:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
Sepal.Length
</th>
<th style="text-align:center;">
Sepal.Width
</th>
<th style="text-align:center;">
Petal.Length
</th>
<th style="text-align:center;">
Petal.Width
</th>
<th style="text-align:center;">
Species
</th>
<th style="text-align:center;">
random.var
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
5.1
</td>
<td style="text-align:center;">
3.5
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
0.5653
</td>
</tr>
<tr>
<td style="text-align:center;">
4.9
</td>
<td style="text-align:center;">
3.0
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
0.4351
</td>
</tr>
<tr>
<td style="text-align:center;">
4.7
</td>
<td style="text-align:center;">
3.2
</td>
<td style="text-align:center;">
1.3
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
-0.4042
</td>
</tr>
<tr>
<td style="text-align:center;">
4.6
</td>
<td style="text-align:center;">
3.1
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
0.6936
</td>
</tr>
<tr>
<td style="text-align:center;">
5.0
</td>
<td style="text-align:center;">
3.6
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
-1.5298
</td>
</tr>
<tr>
<td style="text-align:center;">
5.4
</td>
<td style="text-align:center;">
3.9
</td>
<td style="text-align:center;">
1.7
</td>
<td style="text-align:center;">
0.4
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
0.6775
</td>
</tr>
</tbody>
</table>
<p> </p>
<p>Puede ver que el código está oculto pero se muestran los
resultados.</p>
<p><a
href="https://rstudio.com/wp-content/uploads/2015/03/rmarkdown-spanish.pdf">Esta
guía</a> sobre las opciones de los bloques de código puede ser muy
útil:</p>
<p><img src="images/image12.PNG" width="100%" style="display: block; margin: auto;" /></p>
<p> </p>
<p><a href="https://yihui.org/knitr/options/">En este enlace</a> se
detallan todos los argumentos disponibles para personalizar los bloques
de código.</p>
<p> </p>
</div>
<div id="incrustar-gráficos" class="section level2">
<h2>Incrustar gráficos</h2>
<p>Los gráficos se pueden incrustar en documentos Rmarkdown simplemente
usando funciones de graficación como lo haría en un script de R
normal.</p>
<div id="código" class="section level4">
<h4>Código:</h4>
<p><img src="images/image13.PNG" width="90%" style="display: block; margin: auto;" /></p>
<p> </p>
</div>
<div id="resultado" class="section level4">
<h4>Resultado:</h4>
<p><img src="reportes_dinamicos_con_rmarkdown_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p> </p>
</div>
</div>
<div id="ejercicio-3" class="section level2 alert alert-info">
<h2>Ejercicio 3</h2>
<p> </p>
<p>3.1 Utilice los argumentos <code>eval</code>, <code>collapse</code>
con diferentes valores (TRUE o FALSE) en un segmento donde corre
<code>head(iris)</code>. ¿Cómo afectan el resultado?</p>
<p> </p>
<p>3.2 Haga lo mismo con los argumentos <code>out.width</code>,
<code>fig.width</code>,<code>dpi</code> y <code>fig.height</code> en un
segmento que cree un gráfico. ¿Cómo afecta esta vez?</p>
</div>
<p> </p>
<div id="incrustar-código-de-r-en-el-texto" class="section level2">
<h2>Incrustar código de R en el texto</h2>
<p>Es posible que haya notado a lo largo de este tutorial que tengo
pequeños fragmentos de texto que parecen “bloques de código”. Esto se
conoce como incrustación de código en texto.</p>
<p>Esto se puede hacer de dos maneras:</p>
<div id="dar-un-texto-con-la-apariencia-de-un-segmento-de-código"
class="section level4">
<h4>1.Dar un texto con la apariencia de un segmento de código:</h4>
<hr />
</div>
<div id="código-1" class="section level4">
<h4>Código:</h4>
<p><img src="images/image14.png" width="80%" style="display: block; margin: auto;" /></p>
<p> </p>
</div>
<div id="resultado-1" class="section level4">
<h4>Resultado:</h4>
<p>El promedio del largo del sépalo es
<code>mean(iris$Sepal.Length)</code></p>
<p> </p>
</div>
<div id="evaluar-el-código-en-el-texto" class="section level4">
<h4>2. Evaluar el código en el texto</h4>
</div>
<div id="código-2" class="section level4">
<h4>Código:</h4>
<p><img src="images/image15.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="resultado-2" class="section level4">
<h4>Resultado:</h4>
<p>El promedio del largo de sépalo para <strong>setosa</strong> es
5.006.</p>
<p> </p>
<hr />
</div>
</div>
</div>
<div id="recursos-adicionales-para-personalizar-documentos-rmarkdown"
class="section level1">
<h1>Recursos adicionales para personalizar documentos Rmarkdown</h1>
<div id="metadatos-yaml" class="section level2">
<h2>Metadatos (YAML)</h2>
<p>Hay tres componentes básicos de un documento de R Markdown: los
metadatos, el texto y el código. Los metadatos se escriben entre el par
de tres guiones (“- - -”) generalmente al inicio del documento. La
sintaxis de los metadatos es <a
href="https://en.wikipedia.org/wiki/YAML">YAML (YAML Ain’t Markup
Language)</a>, por lo que a veces también se denomina metadatos YAML. La
sangría es importante en YAML, así que debe añadirla a los subcampos
(con respecto a un campo superior).</p>
<p>Este encabezado muestra las opciones mas comúnmente usadas en los
metadatos YAML:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="sc">---</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>title<span class="sc">:</span> <span class="st">&quot;Un titulo descriptivo y sin faltas ortograficas&quot;</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>author<span class="sc">:</span> <span class="st">&quot;Marcelo Araya&quot;</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>date<span class="sc">:</span> <span class="st">&quot;`r Sys.Date()`&quot;</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>output<span class="sc">:</span> <span class="co"># Varios outputs mostrados solo para el ejemplo</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  html_document<span class="sc">:</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>    fig_caption<span class="sc">:</span> yes</span>
<span id="cb4-8"><a href="#cb4-8"></a>    number_sections<span class="sc">:</span> yes</span>
<span id="cb4-9"><a href="#cb4-9"></a>    toc<span class="sc">:</span> yes</span>
<span id="cb4-10"><a href="#cb4-10"></a>    toc_float<span class="sc">:</span> yes</span>
<span id="cb4-11"><a href="#cb4-11"></a>    df_print<span class="sc">:</span> paged</span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="sc">---</span></span></code></pre></div>
<p><a href="https://bookdown.org/yihui/rmarkdown/html-document.html">En
este enlace</a> se explican en detalle las opciones disponibles en el
encabezado YAML de archivos Rmarkdown.</p>
<p> </p>
</div>
<div id="emojis" class="section level2">
<h2>Emojis</h2>
<p>El paquete <a href="https://github.com/hadley/emo">emo</a> permite
añadir emojis al evaluar un código:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>emo<span class="sc">::</span><span class="fu">ji</span>(<span class="st">&quot;costa_rica&quot;</span>)</span></code></pre></div>
<p>🇨🇷</p>
<p>Tambien se puede incrustar en el texto 🇨🇷, como lo vimos <a
href="#incrustar-código-de-r-en-el-texto">mas arriba</a> ⬆️
(<code>ji("up_arrow")</code>)</p>
<p> </p>
</div>
<div id="cuadros-con-knitrkable" class="section level2">
<h2>Cuadros con knitr::kable</h2>
<p>El paquete <code>knitr</code> también provee una función para mostrar
datos tabulares de forma ordenada y ‘limpia’ en los reportes
dínamicos:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ])</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
Sepal.Length
</th>
<th style="text-align:center;">
Sepal.Width
</th>
<th style="text-align:center;">
Petal.Length
</th>
<th style="text-align:center;">
Petal.Width
</th>
<th style="text-align:center;">
Species
</th>
<th style="text-align:center;">
random.var
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
5.1
</td>
<td style="text-align:center;">
3.5
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
0.5653
</td>
</tr>
<tr>
<td style="text-align:center;">
4.9
</td>
<td style="text-align:center;">
3.0
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
0.4351
</td>
</tr>
<tr>
<td style="text-align:center;">
4.7
</td>
<td style="text-align:center;">
3.2
</td>
<td style="text-align:center;">
1.3
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
-0.4042
</td>
</tr>
<tr>
<td style="text-align:center;">
4.6
</td>
<td style="text-align:center;">
3.1
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
0.6936
</td>
</tr>
<tr>
<td style="text-align:center;">
5.0
</td>
<td style="text-align:center;">
3.6
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
-1.5298
</td>
</tr>
<tr>
<td style="text-align:center;">
5.4
</td>
<td style="text-align:center;">
3.9
</td>
<td style="text-align:center;">
1.7
</td>
<td style="text-align:center;">
0.4
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
0.6775
</td>
</tr>
<tr>
<td style="text-align:center;">
4.6
</td>
<td style="text-align:center;">
3.4
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.3
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
0.1067
</td>
</tr>
<tr>
<td style="text-align:center;">
5.0
</td>
<td style="text-align:center;">
3.4
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
1.7488
</td>
</tr>
<tr>
<td style="text-align:center;">
4.4
</td>
<td style="text-align:center;">
2.9
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
1.2399
</td>
</tr>
<tr>
<td style="text-align:center;">
4.9
</td>
<td style="text-align:center;">
3.1
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
0.1
</td>
<td style="text-align:center;">
setosa
</td>
<td style="text-align:center;">
-0.1413
</td>
</tr>
</tbody>
</table>
<p> </p>
<p>El paquete <a
href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html"><code>kableExtra</code></a>
complementa esta función con muchas herramientas para personalizar el
formato de las tablas en reportes dinámicos en R.</p>
<p> </p>
</div>
<div id="opciones-adicionales-en-knitr" class="section level2">
<h2>Opciones adicionales en knitr</h2>
<p>El argumento <code>opts_knit</code> de <code>knitr</code> permite
definir opciones globales (aplicables a todos los bloques a menos que se
re-definan):</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">root.dir =</span> <span class="st">&quot;..&quot;</span>, <span class="at">eval =</span> <span class="cn">TRUE</span>, <span class="at">echo =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p> </p>
</div>
<div id="presentaciones-y-otros-opciones-de-formato"
class="section level2">
<h2>Presentaciones y otros opciones de formato</h2>
<p>Note en la ventana de creación de un nuevo documento Rmarkdown las
opciones adicionales de formato:</p>
<p><img src="images/image16.PNG" width="70%" style="display: block; margin: auto;" />
 </p>
<p>Los reportes dinámicos se pueden generar en otros formatos incluyendo
presentaciones, pdf y documentos de word.</p>
<p> </p>
</div>
<div id="plantillas-de-rmarkdown" class="section level2">
<h2>Plantillas de Rmarkdown</h2>
<p>El paquete Rmarkdown puede generar resultados en HTML, PDF, MS Word,
viñetas de paquetes de R, presentaciones Beamer y HTML5. Los formatos
adicionales (o ‘variantes’ de estos formatos) están disponibles en otros
paquetes de R. Algunos de esos paquetes son:</p>
<ul>
<li>rmdformats</li>
<li>reveljs</li>
<li>artículos</li>
<li>tufte</li>
</ul>
<p>Una vez estos paquetes han sido instalados, los nuevos formatos
estarán disponibles a través del nuevo cuadro de diálogo Rmarkdown:</p>
<p><img src="images/templates.png" width="70%" style="display: block; margin: auto;" />
 </p>
<hr />
</div>
</div>
<div id="documentos-interactivos" class="section level1">
<h1>Documentos interactivos</h1>
<p>Los documentos de R Markdown también pueden generar contenido
interactivo. Hay dos tipos de documentos interactivos de R Markdown:
HTML Widgets y aplicaciones Shiny.</p>
<p> </p>
<div id="html-widgets" class="section level2">
<h2>HTML widgets</h2>
<p>Los HTML Widgets se implementan con el paquete R
<code>htmlwidgets</code>, que conecta herramientas de JavaScript que
crean aplicaciones interactivas, como gráficos y tablas Se han
desarrollado varios paquetes que emplean HTML widgets como
<code>dygraphs</code>, <code>DT</code> y <code>leaflet</code>. En este
<a href="https://www.htmlwidgets.org">sitio
(https://www.htmlwidgets.org)</a> se muestran una variedad de widgets
disponibles así como instrucciones de como desarrollarlos.</p>
<p>El siguiente código utiliza el paquete <code>leaflet</code> para
generar un mapa interactivo:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>ll_map <span class="ot">&lt;-</span> <span class="fu">leaflet</span>()</span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a>ll_map <span class="ot">&lt;-</span> <span class="fu">addTiles</span>(<span class="at">map =</span> ll_map)</span>
<span id="cb8-4"><a href="#cb8-4"></a></span>
<span id="cb8-5"><a href="#cb8-5"></a>ll_map <span class="ot">&lt;-</span> <span class="fu">setView</span>(<span class="at">map =</span> ll_map, <span class="at">lat =</span> <span class="fl">5.527448</span>, <span class="at">lng =</span> <span class="sc">-</span><span class="fl">87.057245</span>,</span>
<span id="cb8-6"><a href="#cb8-6"></a>    <span class="at">zoom =</span> <span class="dv">13</span>)</span>
<span id="cb8-7"><a href="#cb8-7"></a></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="fu">addPopups</span>(<span class="at">map =</span> ll_map, <span class="at">lat =</span> <span class="fl">5.527448</span>, <span class="at">lng =</span> <span class="sc">-</span><span class="fl">87.057245</span>, <span class="at">popup =</span> <span class="st">&quot;Isla del Coco&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-612bb9b1edcbe615a2c0" style="width:100%;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-612bb9b1edcbe615a2c0">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addPopups","args":[5.527448,-87.057245,"Isla del Coco",null,null,{"maxWidth":300,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"className":""}]}],"setView":[[5.527448,-87.057245],13,[]],"limits":{"lat":[5.527448,5.527448],"lng":[-87.057245,-87.057245]}},"evals":[],"jsHooks":[]}</script>
<p> </p>
<p>Este es el bloque de código que generó el mapa:</p>
<p><img src="images/leaflet.png" width="90%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>Note el uso del argumento de <code>as.is = TRUE</code> en las
opciones del bloque de código.</p>
<p> </p>
</div>
<div id="aplicaciones-shiny" class="section level2">
<h2>Aplicaciones shiny</h2>
<p>El paquete <code>shiny</code> crea aplicaciones web interactivas en
R. Para llamar al código <code>shiny</code> desde un documento R
Markdown, agregue ‘runtime’: shiny a los metadatos YAML, como en este
ejemplo:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="sc">---</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>title<span class="sc">:</span> <span class="st">&quot;Documento Shiny&quot;</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>output<span class="sc">:</span> html_document</span>
<span id="cb9-4"><a href="#cb9-4"></a>runtime<span class="sc">:</span> shiny</span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="sc">---</span></span></code></pre></div>
<p> </p>
<p>El siguiente código crea una aplicación shiny dentro del documento
Rmarkdown:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb10-2"><a href="#cb10-2"></a>  </span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="fu">titlePanel</span>(<span class="st">&quot;Ejemplo&quot;</span>),</span>
<span id="cb10-4"><a href="#cb10-4"></a>  </span>
<span id="cb10-5"><a href="#cb10-5"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb10-6"><a href="#cb10-6"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb10-7"><a href="#cb10-7"></a>      <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">&quot;bins&quot;</span>,</span>
<span id="cb10-8"><a href="#cb10-8"></a>                  <span class="at">label =</span> <span class="st">&quot;Numero de barras:&quot;</span>,</span>
<span id="cb10-9"><a href="#cb10-9"></a>                  <span class="at">min =</span> <span class="dv">1</span>,</span>
<span id="cb10-10"><a href="#cb10-10"></a>                  <span class="at">max =</span> <span class="dv">50</span>,</span>
<span id="cb10-11"><a href="#cb10-11"></a>                  <span class="at">value =</span> <span class="dv">30</span>)</span>
<span id="cb10-12"><a href="#cb10-12"></a>      </span>
<span id="cb10-13"><a href="#cb10-13"></a>    ),</span>
<span id="cb10-14"><a href="#cb10-14"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb10-15"><a href="#cb10-15"></a>      <span class="fu">plotOutput</span>(<span class="at">outputId =</span> <span class="st">&quot;distPlot&quot;</span>)</span>
<span id="cb10-16"><a href="#cb10-16"></a>    )</span>
<span id="cb10-17"><a href="#cb10-17"></a>  )</span>
<span id="cb10-18"><a href="#cb10-18"></a>)</span>
<span id="cb10-19"><a href="#cb10-19"></a></span>
<span id="cb10-20"><a href="#cb10-20"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb10-21"><a href="#cb10-21"></a> </span>
<span id="cb10-22"><a href="#cb10-22"></a>  output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb10-23"><a href="#cb10-23"></a>    </span>
<span id="cb10-24"><a href="#cb10-24"></a>    x    <span class="ot">&lt;-</span> faithful<span class="sc">$</span>waiting</span>
<span id="cb10-25"><a href="#cb10-25"></a>    bins <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(x), <span class="fu">max</span>(x), <span class="at">length.out =</span> input<span class="sc">$</span>bins <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb10-26"><a href="#cb10-26"></a>    </span>
<span id="cb10-27"><a href="#cb10-27"></a>    <span class="fu">hist</span>(x, <span class="at">breaks =</span> bins, <span class="at">col =</span> <span class="st">&quot;#3E4A89FF&quot;</span>, <span class="at">border =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb10-28"><a href="#cb10-28"></a>         <span class="at">xlab =</span> <span class="st">&quot;Tiempo de espera para la siguiente erupcion&quot;</span>,</span>
<span id="cb10-29"><a href="#cb10-29"></a>         <span class="at">main =</span> <span class="st">&quot;Histograma del tiempo de espera&quot;</span>)</span>
<span id="cb10-30"><a href="#cb10-30"></a>  })</span>
<span id="cb10-31"><a href="#cb10-31"></a>}</span>
<span id="cb10-32"><a href="#cb10-32"></a></span>
<span id="cb10-33"><a href="#cb10-33"></a><span class="co"># Crear Shiny app</span></span>
<span id="cb10-34"><a href="#cb10-34"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<p> </p>
<p>Note que esta aplicación no funciona en documentos estáticos de
Rmarkdown. En el sitio <a
href="https://shiny.rstudio.com/gallery/#demos">https://shiny.rstudio.com/gallery</a>
pueden encontrar muchos ejemplos de aplicaciones shiny. Estas
aplicaciones son complejas de incluir en archivos auto-contenidos y por
ello no son tan amigables para reportes dinámicos como los que podemos
generar con R markdown.</p>
<p> </p>
</div>
</div>
<div id="publicar-reportes-en-linea-con-rpubs" class="section level1">
<h1>Publicar reportes en linea con Rpubs</h1>
<p>La plataforma en linea <a href="rpubs.com/">Rpubs</a> permite
publicar los reportes en formato HTML. Esta opción simplifica mucho el
compartir códigos, análisis y resultados ya que solamente necesitamos
enviar el la dirección URL. Aún mas, podemos seguir actualizando los
reportes y la misma dirección URL seguirá conteniendo las versiones
actualizadas de los reportes.</p>
<p>Para enviar nuestros reportes HTML a <a href="rpubs.com/">Rpubs</a>
debemos primero hacer una cuenta en el sitio. Luego de esto simplemente
tenemos que usar el enlace “publish” en la esquina superior derecha de
los reportes:</p>
<p><img src="images/rpubs.PNG" width="90%" style="display: block; margin: auto;" /></p>
<p> </p>
<hr />
</div>
<div id="herramientas-adicionales-para-organizar-análisis-de-datos"
class="section level1">
<h1>Herramientas adicionales para organizar análisis de datos</h1>
<div id="proyectos-de-rstudio" class="section level2">
<h2>Proyectos de Rstudio</h2>
<p>Los proyectos de Rstudio crean carpetas donde se guardan los archivos
relacionados a un análisis específico (código y datos) y hacen de esta
carpeta el directorio de trabajo por defecto cuando se abre el proyecto.
Se pueden crear de esta forma:</p>
<p><img src="images/rproj1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>Luego aparecera una seria de ventanas donde pueden escoger que tipo
de proyecto y el nombre de este:
<img src="images/rproj2.png" width="100%" style="display: block; margin: auto;" /></p>
<p> </p>
</div>
<div id="compendios-de-investigación" class="section level2">
<h2>Compendios de investigación</h2>
<p>Los compendios de investigación son estructuras de carpetas
pre-definidas que permiten seguir un orden lógico e intuitivo para
organizar los archivos usados y generados en un análisis de datos de un
proyecto de investigación. El paquete <a
href="https://marce10.github.io/sketchy/">sketchy</a> genera estos
compendios, permitiendo al usuario seleccionar entre una gama de
compendios comunes en la comunidad científica. Este ejemplo crea el
compendio básico (uno de los 14 que vienen con el paquete):</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>path <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span>
<span id="cb11-2"><a href="#cb11-2"></a></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="fu">make_compendium</span>(<span class="at">name =</span> <span class="st">&quot;proyecto_x&quot;</span>, <span class="at">path =</span> path, <span class="at">format =</span> <span class="st">&quot;basic&quot;</span>,</span>
<span id="cb11-4"><a href="#cb11-4"></a>    <span class="at">Rproj =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## Setting project on an existing directory ...</code></pre>
<pre><code>## Error in make_compendium(name = &quot;proyecto_x&quot;, path = path, format = &quot;basic&quot;, : directory &#39;/tmp/RtmpnoeecZ/proyecto_x&#39; already exists</code></pre>
<p>El paquete crea archivos Rmarkdown con plantillas para el análisis de
datos (carpeta “scripts”) y escritura de manuscritos (carpeta
“manuscript”). Corra <code>path</code> en la consola de R para ver la
dirección de la carpeta donde se creo el compendio.</p>
<p> </p>
</div>
<div id="ejercicio-4" class="section level2 alert alert-info">
<h2>Ejercicio 4</h2>
<p> </p>
<ul>
<li>Cree un reporte dinámico que incluya un mapa dinámico de Costa Rica
usando el paquete <code>leaflet</code></li>
</ul>
<p> </p>
<ul>
<li>Reproduzca alguno de los ejemplos disponibles en el sitio del
paquete dygraphs (<a
href="https://rstudio.github.io/dygraphs/">https://rstudio.github.io/dygraphs/</a>)
e incrústelo en su reporte dinámico</li>
</ul>
<p> </p>
<ul>
<li>Instale el paquete <code>kableExtra</code> y incruste en su reporte
el códifo de ejemplo en la documentación de la función
<code>kable_styling()</code> de ese paquete</li>
</ul>
<p> </p>
<ul>
<li>Cree una presentación Rmarkdown utilizando la opción “Presentation”
en la ventana de creación</li>
</ul>
<p> </p>
<ul>
<li>Genere un reporte dinámico en formato PDF</li>
</ul>
<p> </p>
<ul>
<li>Cree un proyecto de Rstudio para organizar los contenidos del
curso</li>
</ul>
<p> </p>
<ul>
<li>Cree un compendio de investigación con sketchy</li>
</ul>
</div>
<p> </p>
<hr />
<div id="referencias" class="section level2">
<h2>Referencias</h2>
<ul>
<li><a href="https://bookdown.org/yihui/rmarkdown/">R Markdown: The
Definitive Guide</a></li>
<li><a
href="https://blog.rstudio.com/2016/03/21/r-markdown-custom-formats/">Rmarkdown
custom format</a></li>
<li><a href="https://rmarkdown.rstudio.com/index.html">Rmarkdown
website</a></li>
<li><a
href="http://www.jacolienvanrij.com/Tutorials/tutorialMarkdown.html">Jacolien
van Rij: Rmarkdown variants</a></li>
<li><a href="https://github.com/DanielleQuinn/RLessons">Danielle Quinn:
R Lessons</a></li>
<li>Vaidyanathan, Ramnath, Yihui Xie, JJ Allaire, Joe Cheng, and Kenton
Russell. 2019. Htmlwidgets: HTML Widgets for R. <a
href="https://github.com/ramnathv/htmlwidgets"
class="uri">https://github.com/ramnathv/htmlwidgets</a>.</li>
</ul>
<hr />
<hr />
<p><font size="4">Información de la sesión</font></p>
<pre><code>## R version 4.1.1 (2021-08-10)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 20.04.2 LTS
## 
## Matrix products: default
## BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0
## LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0
## 
## locale:
##  [1] LC_CTYPE=es_ES.UTF-8      
##  [2] LC_NUMERIC=C              
##  [3] LC_TIME=es_CR.UTF-8       
##  [4] LC_COLLATE=es_ES.UTF-8    
##  [5] LC_MONETARY=es_CR.UTF-8   
##  [6] LC_MESSAGES=es_ES.UTF-8   
##  [7] LC_PAPER=es_CR.UTF-8      
##  [8] LC_NAME=C                 
##  [9] LC_ADDRESS=C              
## [10] LC_TELEPHONE=C            
## [11] LC_MEASUREMENT=es_CR.UTF-8
## [12] LC_IDENTIFICATION=C       
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets 
## [6] methods   base     
## 
## other attached packages:
##  [1] tufte_0.12          rticles_0.24       
##  [3] revealjs_0.9        rmdformats_1.0.4   
##  [5] kableExtra_1.3.4    rmarkdown_2.14     
##  [7] sketchy_1.0.2       remotes_2.4.2      
##  [9] leaflet_2.1.1       knitr_1.39         
## [11] xaringanExtra_0.7.0 emo_0.0.0.9000     
## [13] cowsay_0.8.0       
## 
## loaded via a namespace (and not attached):
##   [1] uuid_1.1-0          workflowr_1.7.0    
##   [3] systemfonts_1.0.4   plyr_1.8.7         
##   [5] lazyeval_0.2.2      crosstalk_1.2.0    
##   [7] usethis_2.1.6       ggplot2_3.3.6      
##   [9] urltools_1.7.3      digest_0.6.29      
##  [11] foreach_1.5.2       htmltools_0.5.3    
##  [13] rsconnect_0.8.26    fansi_1.0.3        
##  [15] magrittr_2.0.3      memoise_2.0.1      
##  [17] vertical_0.1.0.0000 svglite_2.1.0      
##  [19] prettyunits_1.1.1   colorspace_2.0-3   
##  [21] rvest_1.0.2         xfun_0.31          
##  [23] dplyr_1.0.9         callr_3.7.0        
##  [25] crayon_1.5.1        jsonlite_1.8.0     
##  [27] zoo_1.8-10          iterators_1.0.14   
##  [29] ape_5.6-2           glue_1.6.2         
##  [31] gtable_0.3.0        emmeans_1.7.4-1    
##  [33] webshot_0.5.3       pkgbuild_1.3.1     
##  [35] scales_1.2.0        oai_0.3.2          
##  [37] mvtnorm_1.1-3       solrium_1.2.0      
##  [39] DBI_1.1.3           Rcpp_1.0.9         
##  [41] viridisLite_0.4.0   xtable_1.8-4       
##  [43] bold_1.2.0          rgbif_3.7.3        
##  [45] clisymbols_1.2.0    datawizard_0.4.1   
##  [47] htmlwidgets_1.5.4   httr_1.4.3         
##  [49] papaja_0.1.1        RColorBrewer_1.1-3 
##  [51] ellipsis_0.3.2      pkgconfig_2.0.3    
##  [53] reshape_0.8.9       sass_0.4.1         
##  [55] utf8_1.2.2          here_1.0.1         
##  [57] conditionz_0.1.0    crul_1.2.0         
##  [59] tidyselect_1.1.2    rlang_1.0.4        
##  [61] later_1.3.0         effectsize_0.7.0   
##  [63] munsell_0.5.0       tools_4.1.1        
##  [65] cachem_1.0.6        fortunes_1.5-4     
##  [67] cli_3.3.0           generics_0.1.2     
##  [69] tinylabels_0.2.3    devtools_2.4.3     
##  [71] evaluate_0.15       stringr_1.4.0      
##  [73] fastmap_1.1.0       yaml_2.3.5         
##  [75] processx_3.6.1      fs_1.5.2           
##  [77] purrr_0.3.4         ritis_1.0.0        
##  [79] packrat_0.8.0       rrtools_0.1.5      
##  [81] nlme_3.1-152        whisker_0.4        
##  [83] formatR_1.12        taxize_0.9.100     
##  [85] xml2_1.3.3          brio_1.1.3         
##  [87] compiler_4.1.1      rstudioapi_0.13    
##  [89] curl_4.3.2          testthat_3.1.4     
##  [91] tibble_3.1.8        bslib_0.3.1        
##  [93] stringi_1.7.8       highr_0.9          
##  [95] ps_1.7.1            parameters_0.18.1  
##  [97] desc_1.4.1          lattice_0.20-44    
##  [99] vctrs_0.4.1         pillar_1.8.0       
## [101] lifecycle_1.0.1     rmsfact_0.0.3      
## [103] triebeard_0.3.0     jquerylib_0.1.4    
## [105] estimability_1.3    data.table_1.14.2  
## [107] insight_0.17.1      httpuv_1.6.5       
## [109] R6_2.5.1            bookdown_0.27      
## [111] promises_1.2.0.1    sessioninfo_1.2.2  
## [113] codetools_0.2-18    assertthat_0.2.1   
## [115] pkgload_1.2.4       rprojroot_2.0.3    
## [117] withr_2.5.0         httpcode_0.3.0     
## [119] bayestestR_0.12.1   parallel_4.1.1     
## [121] grid_4.1.1          coda_0.19-4        
## [123] git2r_0.30.1        getPass_0.2-2      
## [125] lubridate_1.8.0</code></pre>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
